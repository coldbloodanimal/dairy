Topics
## 主题
前面我们提升了消息的灵活性。替代了使用**fanout**交换机只能广播。我们使用**direct**交换机。获得了通过路由迷失选择接受消息的可能性。
尽管使用direct交换机提升我们系统，他依然有限制，不能路由根据多个标准。
在我们消息系统中我们不仅仅想要根据路由密匙订阅队列，我们也想根据生产消息的源头订阅。你或许知道这个概念从**syslog** unix工具。它路由日志根据严重性(消息/警告……)和facility（设备？）(auth/cron/kern……)。我们的例子类似。
那个例子会给我们很多灵活性。我们只想监听严重错误来自于'cron' 和所有来自于'kern'.
为了实现那种灵活性在我们的日志系统中，我们需要学习更复杂的topic交换机。
## Topic exchange
发送到主题交换器的消息不能含有随意的路由关键字-它必须是一组单词，由**.** 分割。单词可以是任何东西，但是通常它们指定一些和消息关联的属性。一个由价值的路由密匙例子: "stock.usd.nyse", "nyse.vmw", "quick.orange.rabbit". 可以由很多个单词在路由关键字中如果你喜欢，上限时255字节。
绑定关键字必须是同样的格式。topic exchange背后的逻辑跟direct exchage类似-消息携带特定路由关键字传递给所有队列那些绑定了匹配绑定关键字的。（从对象的角度讲，交换机是个对象，队列时个对象，绑定也是个对象，消息携带的关键字和绑定的关键字匹配，消息发送到相应队列。嗯，topic 交换机和队列是一对多，和绑定也是一对多，队列和绑定是一对一）。然而又两个特别重要的例子关于绑定关键字。
* \*(星)可以替代确定的一个单词
* \#(哈希)可以替代0个或多个单词
这在例子中很好解释

![topic](https://www.rabbitmq.com/img/tutorials/python-five.png)
此例中，我们发送的消息都是描述动物的。这些消息北宋宋的时候携带的路由密匙又三个单词组成(两个.)。路由密匙中第一个单词描述速度，第二个是颜色，第三个是物种："<speed>.<colour>.<species>".
我们创建三个绑定:Q1队列绑定关键字 "*.orange.*"和Q2的"*.*.rabbit"和"lazy.#".
这些分类总结为：
* Q1 队列对所有黄颜色的动物感兴趣。
* Q2 想要监听所有关于兔子，和懒的动物。

一个消息路由关键字被设置为"quick.orange.rabbit"将会被传递给两个队列。消息"lazy.orange.elephant"也会。另一方面"quick.orange.fox"只会去队列1, "lazy.brown.fox"只会去队列2. "lazy.pink.rabbit"指挥去第二队列一次,尽管匹配了两次. "quick.brown.fox"没有匹配任何一个，所以会被丢弃。
如果我们破坏了协议发送了一个消息有四个单词会发生什么呢，比如"orage"或者"quick.orange.male.rabbit"?好吧，这些消息不匹配任何绑定然后会丢失。
另一方面"lazy.orange.male.rabbit",尽管它有四个单词，会匹配最后一个绑定会被传递到队列2中去。
